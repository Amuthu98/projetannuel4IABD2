<!DOCTYPE html>
<html lang="fr">

	<head>
		<meta charset="utf-8">
		<title>Foot Forecast</title>
		<link rel="icon" type="images/png" href="images/icon-color-simple.png">
		<meta name="description" content="Foot Forcast, Application de prédiction sportive.">
		<meta name="keywords" content="Foot Forcast, Foot, Prédiction, Sport, Sportive">
		<!-- Import -->
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css">
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"></script>
		<link rel="stylesheet" href="css/color/mdb.min.css">
		<link rel="stylesheet" href="css/animate/animate.css">
		<link rel="stylesheet" href="css/bar/bar.css">
		<link rel="stylesheet" href="css/custom.css">
		<!-- Responsive -->
		<meta name="viewport" content="width=device-width, initial-scale=1">
	</head>
	
	<body class="success-color-dark">
	
		<!-- NAVBAR -->
		<nav class="navbar justify-content-md-center sticky-top navbar-light success-color">
			<img src="images/icon-blank-min.png" height="40" class="d-inline-block align-top" alt="Responsive image"/>
		</nav>
		
		<h1 class="text-white font-weight-bold text-center mt-4">PREDICTION</h1>
		<div class="container card success-color mt-4">
			<img class="mx-auto d-block mt-3" src="images/cup.png" style="width:12%">
			<div class="container-sm">
				<div class="row">
					<div id="hometeamname" class="col">
					</div>
					<div class="col">
					</div>
					<div id="awayteamname" class="col">
					</div>
				</div>
			</div>
			
			<h4 class="text-white font-weight-bold text-center mt-4 mr-1">Gagnant</h4>
			<div class="container-sm mt-3">
				<div class="row">
					<div class="col">
						<div id="predicthometeam" class="progress progress-bar-vertical mt-2 ml-2" title="HomeTeam win %" data-toggle="popover" data-trigger="hover" data-placement="bottom" data-content="" style="width:310px;height:180px"></div>
					</div>
					<div class="col">
						<div id="predictdraw" class="progress progress-bar-vertical mt-2 ml-2" title="Draw %" data-toggle="popover" data-trigger="hover" data-placement="bottom" data-content="" style="width:310px;height:180px"></div>
					</div>
					<div class="col">
						<div id="predictawayteam" class="progress progress-bar-vertical mt-2 ml-2" title="AwayTeam win %" data-toggle="popover" data-trigger="hover" data-placement="bottom" data-content="" style="width:310px;height:180px"></div>
					</div>
				</div>
			</div>
			<br>
			
			<h4 class="text-white font-weight-bold text-center mt-4 mr-1">Nombre de but sur l'ensemble du match</h4>
			<div class="card success-color-dark mt-3">
				<div class="row">
					<div class="col">
						<h2 class="text-white font-weight-bold text-center mt-3 mb-3">0.5 but</h2>
					</div>
					<div class="col">
						<h2 class="text-white font-weight-bold text-center mt-3 mb-3">1.5 but</h2>
					</div>
					<div class="col">
						<h2 class="text-white font-weight-bold text-center mt-3 mb-3">2.5 but</h2>
					</div>
				</div>
				<div class="row">
					<div class="col">
						<div id="predictbut05" title="< a 0.5 but | > a 0.5 but" data-toggle="popover" data-trigger="hover" data-placement="bottom" data-content=""></div>
					</div>
					<div class="col">
						<div id="predictbut15" title="< a 1.5 but | > a 1.5 but" data-toggle="popover" data-trigger="hover" data-placement="bottom" data-content=""></div>
					</div>
					<div class="col">
						<div id="predictbut25" title="< a 2.5 but | > a 2.5 but" data-toggle="popover" data-trigger="hover" data-placement="bottom" data-content=""></div>
					</div>
				</div>
			</div>
			<br>
			
			<h4 class="text-white font-weight-bold text-center mt-4">Score fin de match</h4>
			<div class="card success-color-dark mt-3">
				<div class="row">
					<div id="hometeamscore" class="col">
					</div>
					<div class="col">
						<h1 class="text-white font-weight-bold text-center mt-2">-</h1>
					</div>
					<div id="awayteamscore" class="col">
					</div>
				</div>
			</div>
			<br>
			
			<h4 class="text-white font-weight-bold text-center mt-4">Mi-temps avec le plus de but</h4>
			<div class="card success-color-dark mt-3">
				<div class="row">
					<div class="col">
					</div>
					<div id="winhalftime" class="col">
					</div>
					<div class="col">
					</div>
				</div>
			</div>
			
			<br><br>
			<!-- Button trigger modal -->
			<div class="col-md-12 text-center">
				<button type="button" class="btn success-color-dark text-white" data-toggle="modal" data-target="#exampleModalCenter" style="width:45%">Donnez nous votre avis sur cette prediction</button>
			</div>
			<br>
		</div>
		
		<br>
		
		<h1 class="text-white font-weight-bold text-center mt-4">SIMULATEUR DE GAIN</h1>
		<div class="container card success-color mt-4 mb-4">
			<div class="container">
				<div class="row">
					<div class="col-sm-4">
						<h1 class="text-white font-weight-bold text-center mt-4 ml-3">MISE</h1>
						<div class="input-group mb-3">
							<input id="mise" type="text" class="form-control" placeholder="Euros">
						</div>
					</div>
					<div class="col-sm-4"></div>
					<div class="col-sm-4">
						<h1 class="text-white font-weight-bold text-center mt-4 mr-3">COTE</h1>
						<div class="input-group mb-3">
							<input id="cote" type="text" class="form-control" placeholder="Cote">
						</div>
					</div>
				</div>
			</div>
			<br>
			
			<div class="text-center">
				<button id="htodd" type="button" class="btn btn-success"></button>
				<button id="drawodd" type="button" class="btn btn-warning"></button>
				<button id="atodd" type="button" class="btn btn-success"></button>
			</div>
			
			<div class="col-md-12 text-center mt-4">
				<button type="button" class="btn success-color-dark text-white" onClick="gain()">Calculer</button>
			</div>
			<br>
			
			<h1 class="text-warning font-weight-bold text-center mt-3">GAINS POTENTIELS</h1>
			<h1 id="gainspotentiels" class="text-white font-weight-bold text-center mt-3">0 EUR</h1>
			<img class="mx-auto d-block" src="images/coin.png" style="width:18%">
		</div>

		<!-- Modal -->
		<div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
			<div class="modal-dialog modal-dialog-centered" role="document">
				<div class="modal-content">
					<div class="modal-header">
						<h5 class="modal-title" id="exampleModalLongTitle">Pensez-vous que cette prediction est bonne ?</h5>
						<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
					</div>
					<div class="modal-body text-center">
						<i class="fa fa-thumbs-up mr-4" style="font-size:48px;color:blue;cursor: pointer;" onclick="feedback('like')"></i>
						<i class="fa fa-thumbs-down ml-4" style="font-size:48px;color:red;cursor: pointer;" onclick="feedback('dislike')"></i>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn red text-white" data-dismiss="modal">Close</button>
					</div>
				</div>
			</div>
		</div>
	
	</body>

	<script type="text/javascript">
	function $_GET(param) {
		var vars = {};
		window.location.href.replace( location.hash, '' ).replace( 
			/[?&]+([^=&]+)=?([^&]*)?/gi, // regexp
			function( m, key, value ) { // callback
				vars[key] = value !== undefined ? value : '';
			}
		);

		if ( param ) {
			return vars[param] ? vars[param] : null;	
		}
		return vars;
	}

	var idmatch = decodeURI( $_GET( 'idmatch' ) );
	var oddsawaywin = decodeURI( $_GET( 'oddsawaywin' ) );
	var oddsdraw = decodeURI( $_GET( 'oddsdraw' ) );
	var oddshomewin = decodeURI( $_GET( 'oddshomewin' ) );
	var awayteam = decodeURI( $_GET( 'awayteam' ) );
	var hometeam = decodeURI( $_GET( 'hometeam' ) );
	
	document.getElementById("atodd").textContent = oddsawaywin;
	document.getElementById("drawodd").textContent = oddsdraw;
	document.getElementById("htodd").textContent = oddshomewin;
	
	//popover
	$(document).ready(function(){
		$('[data-toggle="popover"]').popover();   
	});
	
	//matches
	$.getJSON("predictions_gain_perte_sheduled.json", function(json) {
		console.log(json);
	
		var count = Object.keys(json.id_match).length;
		
		for(var i = 0; i < count; i++){
			if(json.id_match[i] == idmatch){
				document.getElementById("hometeamname").innerHTML = `<h2 class="text-white font-weight-bold text-center mt-4">${json.homeTeam[i]}</h2>`
				document.getElementById("awayteamname").innerHTML = `<h2 class="text-white font-weight-bold text-center mt-4">${json.AwayTeam[i]}</h2>`
				
				document.getElementById("predictawayteam").innerHTML = `<div id="barAT" class="progress-bar progress-bar success-color-dark " role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" style="height:${json.prediction_awayTeam_victory[i]}%;"><h5></h5></div>`
				
				document.getElementById("predictdraw").innerHTML = `<div class="progress-bar progress-bar success-color-dark" role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" style="height:${json.prediction_egalite[i]}%;"><h5></h5></div>`
				
				document.getElementById("predicthometeam").innerHTML = `<div class="progress-bar progress-bar success-color-dark" role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" style="height:${json.prediction_homeTeam_victory[i]}%;"><h5></h5></div>`
				
				var winrateat = `${json.prediction_awayTeam_victory[i]}%`
				document.getElementById("predictawayteam").setAttribute('data-content', winrateat);
				
				var winratedraw = `${json.prediction_egalite[i]}%`
				document.getElementById("predictdraw").setAttribute('data-content', winratedraw);
				
				var winrateht = `${json.prediction_homeTeam_victory[i]}%`
				document.getElementById("predicthometeam").setAttribute('data-content', winrateht);
			}
		}
		
	});
	
	$.getJSON("predictions_score_exact_sheduled.json", function(jsonscore) {
		console.log(jsonscore);
	
		var count = Object.keys(jsonscore.id_match).length;
		
		for(var i = 0; i < count; i++){
			if(jsonscore.id_match[i] == idmatch){
				document.getElementById("hometeamscore").innerHTML = `<h1 class="text-white font-weight-bold text-center mt-3 mb-3">${jsonscore.prediction_score_HomeTeam[i]}</h1>`
				document.getElementById("awayteamscore").innerHTML = `<h1 class="text-white font-weight-bold text-center mt-3 mb-3">${jsonscore.prediction_score_AwayTeam[i]}</h1>`
				
			}
		}
		
	});
	
	$.getJSON("predictions_mi_temps_gagnante_sheduled.json", function(jsonhalf) {
		console.log(jsonhalf);
	
		var count = Object.keys(jsonhalf.id_match).length;
		
		for(var i = 0; i < count; i++){
			if(jsonhalf.id_match[i] == idmatch){
				document.getElementById("winhalftime").innerHTML = `<h1 class="text-white font-weight-bold text-center mt-3 mb-3">${jsonhalf.mi_temps_gagnante[i]}</h1>`
				
			}
		}
		
	});
	
	$.getJSON("predictions_buts_matchs_sheduled.json", function(jsonbut) {
		console.log(jsonbut);
	
		var count = Object.keys(jsonbut.id_match).length;
		
		for(var i = 0; i < count; i++){
			if(jsonbut.id_match[i] == idmatch){
				document.getElementById("predictbut05").innerHTML = `<h2 class="text-white font-weight-bold text-center mt-3 mb-3">${jsonbut.inferieur_a_0_5_buts[i]}% | ${jsonbut.superieur_a_0_5_buts[i]}%</h2>`
				document.getElementById("predictbut15").innerHTML = `<h2 class="text-white font-weight-bold text-center mt-3 mb-3">${jsonbut.inferieur_a_1_5_buts[i]}% | ${jsonbut.superieur_a_1_5_buts[i]}%</h2>`
				document.getElementById("predictbut25").innerHTML = `<h2 class="text-white font-weight-bold text-center mt-3 mb-3">${jsonbut.inferieur_a_2_5_buts[i]}% | ${jsonbut.superieur_a_2_5_buts[i]}%</h2>`
				
			}
		}
		
	});
	
	function gain() {
		 var mise = document.getElementById("mise").value;
		 var cote = document.getElementById("cote").value;
		 var gain = mise * cote;
		 document.getElementById("gainspotentiels").innerHTML = gain + " EUR";
	};
	
	function feedback(x){
		const form = document.createElement('form');
		form.method = 'post';
		form.action = 'feedback.php';
		
		var url = window.location.protocol + "//" + window.location.host + "/" + window.location.pathname + window.location.search;
		
		params = {idmatch: idmatch, awayteam: awayteam, hometeam: hometeam, feedback: x, url: url};

		for (const key in params) {
			if (params.hasOwnProperty(key)) {
				const hiddenField = document.createElement('input');
				hiddenField.type = 'hidden';
				hiddenField.name = key;
				hiddenField.value = params[key];

				form.appendChild(hiddenField);
			}
		}

		document.body.appendChild(form);
		form.submit();
	};
	
	</script>
	
</html>